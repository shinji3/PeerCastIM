<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>設定 - PeerCast - 
{@if servMgr.serverName}
{$servMgr.serverName}
{@else}
{$servMgr.serverIP}:{$servMgr.serverPort}
{@end}
</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="peercast.css" rel="stylesheet" type="text/css">
<script src="/assets/js/jquery-3.2.1.min.js"></script>
<script src="js/reloader.js"></script>
</head>
<body bgcolor="#DDDDDD">
<div class="reloader" data-url="?fragment=notifications" data-interval="{$servMgr.refreshHTML}">
{@fragment notifications}
<script>
var notifications = [];
var t = {!sys.time};
var r = {!servMgr.refreshHTML};
{@loop notificationBuffer.numNotifications}
{@if !loop.notification.isRead}
if (t - {$loop.notification.unixTime} <= (2*r))
notifications.push({ time: "{\loop.notification.time}", type: "{\loop.notification.type}", message: "{\loop.notification.message}" });
{@end}
{@end}
// {$notificationBuffer.markAsRead}
function notifyMe() {
if (!("Notification" in window)) {
alert("This browser does not support system notifications");
}
else if (Notification.permission === "granted") {
for (var i = 0; i < notifications.length; i++) {
spawnNotification(notifications[i].message, "/assets/images/small-logo.png", notifications[i].type);
}
}
else if (Notification.permission !== 'denied') {
Notification.requestPermission(function (permission) {
if (permission === "granted") {
for (var i = 0; i < notifications.length; i++) {
spawnNotification(notifications[i].message, "/assets/images/small-logo.png", notifications[i].type);
}
}
});
}
}
function spawnNotification(theBody,theIcon,theTitle) {
var options = {
body: theBody,
icon: theIcon
}
var n = new Notification(theTitle,options);
setTimeout(n.close.bind(n), 5000);
}
notifyMe();
</script>
{@end}
</div>
<div align="center">
<table width="100%" height="100%" border="1" align="center" cellpadding="5" cellspacing="0" bordercolor="#999999" bgcolor="#FFFFFF">
<tr>
<td class="container" align="center" valign="top">
<div align="center">
<div align="center">
<table width="100%" border="0">
<tr>
<td nowrap>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="middle" nowrap>
<table border="0" align="center" cellpadding="1" cellspacing="0">
<tr>
<td rowspan="2" valign="middle"><img src="/assets/images/small-logo.png" alt="www.peercast.org" border="0"></td>
<td valign="bottom" style="padding: 0; padding-left: 2px">
<span class="titlelinksBig">Peercast</span>
</td>
</tr>
<tr>
<td valign="top" style="line-height: 0.8em; padding: 0; text-align: center">
<a href="https://github.com/plonk/peercast-yt">
<span class="normal-small" style="font-size: 11px">{$servMgr.version}</span>
</a>
</td>
</tr>
</table>
<div align="center"><span class="titlelinksBig"> </span>
</div></td>
<td style="padding: 0" align="right">
{@if servMgr.upgradeURL}
<div align="center" class="normal">
<a href="{$servMgr.upgradeURL}" target="_blank">
<strong>
<font color="#FF0000">
クライアントをアップグレードしてください。ここをクリックで最新バージョンをダウンロード。
</font>
</strong>
</a>
</div>
{@else}
{@if servMgr.rootMsg}
<span title="ルートサーバーからのメッセージ" class="root-message normal-small" align="center">
{$servMgr.rootMsg}
</span>
{@end}
{@end}
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<table class="navbar" width="100%" border="1" cellpadding="1" cellspacing="0">
<tr class="normal">
<td width="14.286%"><div align="center"><a href="index.html">情報</a></div></td>
<td width="14.286%"><div align="center"><a href="channels.html">チャンネル</a></div></td>
<td width="14.286%"><div align="center"><a href="notifications.html">通知</a></div></td>
<td width="14.286%"><div align="center"><a href="connections.html">接続</a></div></td>
<td width="14.286%"><div align="center"><a href="settings.html">設定</a></div></td>
<td width="14.286%"><div align="center"><a href="viewlog.html">ログ表示</a></div></td>
<td width="14.286%"><div align="center"><a href="logout.html">ログアウト</a></div></td>
</tr>
</table>
<FORM action=/admin method=get>
<INPUT type=hidden value=apply name=cmd>
<TABLE align=center border=0>
<TBODY>
<TR align=middle>
<TD colspan="2" vAlign=top>
<div align="center">
<table width="50%" border="0">
<tr bgcolor="#ccc">
<td colspan="2" class="normal"><div align="center"><strong>基本設定</strong></div></td>
</tr>
<TR align=left bgColor=#ddd class="normal">
<TD style="width: 8.5em">ポート</TD>
<TD><INPUT size=10 value={$servMgr.serverPort1} name=port></TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD>パスワード</TD>
<TD>
<INPUT name=passnew type=password size="10" maxlength="32" {@if servMgr.password}value={$servMgr.password}{@end} style="width: 100%">
</TD>
</TR>
<TR align=left bgColor=#ddd class="normal">
<TD>リレー数上限</TD>
<TD><INPUT size=5 value={$servMgr.maxRelays} name=maxrelays></TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD>ダイレクト数上限</TD>
<TD><INPUT size=5 value={$servMgr.maxDirect} name=maxdirect></TD>
</TR>
<TR align=left bgColor=#ddd class="normal">
<TD>言語</TD>
<TD>
<select name="htmlPath" size="1" id="htmlPath">
<option value="en" {@if servMgr.lang.en} selected {@end}>英語</option>
<option value="fr" {@if servMgr.lang.fr} selected {@end}>フランス語</option>
<option value="de" {@if servMgr.lang.de} selected {@end}>ドイツ語</option>
<option value="ja" {@if servMgr.lang.ja} selected {@end}>日本語</option>
</select>
</TD>
</TR>
</table>
</div>
</TD>
</TR>
<TR align=middle>
<TD colspan="2" vAlign=top>
<div align="center">
<INPUT type=submit value="設定を保存" name=submit>
</div>
</TD>
</TR>
<TR align=middle>
<TD vAlign=top>
<TABLE width="100%" align=center border=0>
<TBODY>
<TR align=middle bgColor=#ccc class="normal">
<TD colSpan=2><B>サーバー</B></TD>
</TR>
<TR align=left bgColor=#ddd class="normal">
<TD width="50%">サーバー名</TD>
<TD>
<INPUT value="{$servMgr.serverName}" name=servername placeholder="サーバーのニックネーム">
</TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD width="50%">DJメッセージ</TD>
<TD><INPUT {@if chanMgr.djMessage}value="{$chanMgr.djMessage}"{@end} name=djmsg>
</TD>
</TR>
<TR align=left bgColor=#ddd class="normal">
<TD>ICY MetaInterval</TD>
<TD><INPUT size=5 value={$chanMgr.icyMetaInterval} name=icymeta>
</TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD>モード</TD>
<TD>
<label><INPUT type=radio {@if !servMgr.isRoot}CHECKED{@end} value=0 name=root>
<I>通常</I></label><BR>
<label><INPUT name=root type=radio value=1 {@if servMgr.isRoot}CHECKED{@end}>
<I>ルート</I></label></TD>
</TR>
<TR align=left bgColor=#ddd class="normal">
<TD>HTML再読み込み (秒)</TD>
<TD><INPUT size=10 value={$servMgr.refreshHTML} name=refresh></TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD>公開ディレクトリ</TD>
<TD>
<label>
<INPUT type="checkbox" name="public_directory" {@if servMgr.publicDirectoryEnabled}checked{@end}>
<i>有効化</i>
</label>
<a href="/public/">表示</a>
</TD>
</TR>
</TBODY>
</TABLE>
</TD>
<TD vAlign=top>
<TABLE width="100%" align=center border=0>
<TBODY>
<TR align=middle bgColor=#ccc class="normal">
<TD colSpan=2><B>ネットワーク</B></TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD>YPアドレス</TD>
<TD><input {@if servMgr.ypAddress}value={$servMgr.ypAddress}{@end} name=yp></TD>
</TR>
<TR align=left bgColor=#ddd class="normal">
<TD>送信速度上限 (Kbps)</TD>
<TD><INPUT size=5 value={$servMgr.maxBitrateOut} name=maxup></TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD width="50%">Ch毎リレー数上限</TD>
<TD><INPUT size=5 value={$chanMgr.maxRelaysPerChannel} name=maxrelaypc></TD>
</TR>
<TR align=left bgColor=#ddd class="normal">
<TD width="50%">コントロール着信数上限</TD>
<TD><INPUT size=5 value={$servMgr.maxControlsIn} name=maxcin></TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD>着信数上限 </TD>
<TD><INPUT name=maxsin id="maxsin" value={$servMgr.maxServIn} size=5></TD>
</TR>
</TBODY>
</TABLE>
</TD>
</TR>
<TR align=middle>
<TD vAlign=top>
<TABLE width="100%" align=center border=0>
<TBODY>
<TR align=middle bgColor=#ccc class="normal">
<TD colSpan=5><B>フィルタ</B></TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD><B>IPマスク</B></TD>
<TD><B>ネットワーク</B></TD>
<TD><B>ダイレクト</B></TD>
<TD><B>プライベート</B></TD>
<TD><B>Ban</B></TD>
</TR>
{@loop servMgr.numFilters}
{@if loop.indexEven} <TR align=middle bgColor=#eee> {@else} <TR align=middle bgColor=#ddd class="normal"> {@end}
<TD><INPUT size=15 value="{$loop.filter.ip}" name=filt_ip>
</TD>
<TD><INPUT type=checkbox {@if loop.filter.network}CHECKED{@end} value=1 name=filt_nw{$loop.index}>
</TD>
<TD><INPUT type=checkbox {@if loop.filter.direct}CHECKED{@end} value=1 name=filt_di{$loop.index}>
</TD>
<TD><INPUT type=checkbox {@if loop.filter.private}CHECKED{@end} value=1 name=filt_pr{$loop.index}>
</TD>
<TD><INPUT type=checkbox {@if loop.filter.banned}CHECKED{@end} value=1 name=filt_bn{$loop.index}>
</TD>
</TR>
{@end}
</TBODY>
</TABLE>
</TD>
<TD vAlign=top>
<TABLE width="100%" align=center border=0>
<TBODY>
<TR align=middle bgColor=#ccc class="normal">
<TD colSpan=3><B>セキュリティ</B></TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD><B>次のポートで許可</B></TD>
<TD><B>{$servMgr.serverPort1}<B></B></B></TD>
<TD><B>{$servMgr.serverPort2}<B></B></B></TD>
</TR>
<TR align=left bgColor=#ddd class="normal">
<TD>HTML</TD>
<TD><INPUT type=checkbox {@if servMgr.allow.HTML1}CHECKED{@end} value=1 name=allowHTML1>
</TD>
<TD><INPUT type=checkbox {@if servMgr.allow.HTML2}CHECKED{@end} value=1 name=allowHTML2>
</TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD>ブロードキャスト</TD>
<TD><INPUT type=checkbox {@if servMgr.allow.broadcasting1}CHECKED{@end} value=1 name=allowBroadcast1>
</TD>
<TD><INPUT type=checkbox {@if servMgr.allow.broadcasting2}CHECKED{@end} value=1 name=allowBroadcast2>
</TD>
</TR>
<TR align=left bgColor=#ddd class="normal">
<TD>ネットワーク</TD>
<TD><INPUT type=checkbox {@if servMgr.allow.network1}CHECKED{@end} value=1 name=allowNetwork1>
</TD>
<TD></TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD>ダイレクト</TD>
<TD><INPUT type=checkbox {@if servMgr.allow.direct1}CHECKED{@end} value=1 name=allowDirect1>
</TD>
<TD> </TD>
</TR>
</TBODY>
</TABLE>
</TD>
</TR>
<TR align=middle>
<TD vAlign=top>
<TABLE width="100%" align=center border=0>
<TBODY>
<TR align=middle bgColor=#ccc class="normal">
<TD colSpan=2><B>認証</B></TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD>HTML認証方式</TD>
<TD>
<label><INPUT type=radio {@if servMgr.auth.useCookies}CHECKED{@end} value=cookie name=auth>
<I>クッキー</I></label><BR>
<label><INPUT type=radio {@if servMgr.auth.useHTTP}CHECKED{@end} value=http name=auth>
<I>Basic HTTP</I></label></TD>
</TR>
<TR align=left bgColor=#ddd class="normal">
<TD>クッキー期限</TD>
<TD>
<label><INPUT type=radio {@if servMgr.auth.useSessionCookies}CHECKED{@end} value=session name=expire>
<I>セッション</I></label><BR>
<label><INPUT type=radio {@if !servMgr.auth.useSessionCookies}CHECKED{@end} value=never name=expire>
<I>永続</I></label></TD>
</TR>
</TBODY>
</TABLE>
</TD>
<TD vAlign=top>
<TABLE width="100%" align=center border=0>
<TBODY>
<TR align=middle bgColor=#ccc class="normal">
<TD colSpan=2><B>ログ</B></TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD width="50%">デバッグ</TD>
<TD><INPUT type=checkbox {@if servMgr.log.debug}CHECKED{@end} value=1 name=logDebug>
</TD>
</TR>
<TR align=left bgColor=#ddd class="normal">
<TD>エラー</TD>
<TD><INPUT type=checkbox {@if servMgr.log.errors}CHECKED{@end} value=1 name=logErrors>
</TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD>ネットワーク</TD>
<TD><INPUT type=checkbox {@if servMgr.log.gnet}CHECKED{@end} value=1 name=logNetwork>
</TD>
</TR>
<TR align=left bgColor=#ddd class="normal">
<TD>チャンネル</TD>
<TD><INPUT type=checkbox {@if servMgr.log.channel}CHECKED{@end} value=1 name=logChannel>
</TD>
</TR>
</TBODY>
</TABLE>
</TD>
</TR>
<TR align=middle>
<TD vAlign=top>
{@if servMgr.isRoot}
<TABLE width="100%" align=center border=0>
<TBODY>
<TR align=middle bgColor=#ccc class="normal">
<TD colSpan=2><B>ルートモード</B></TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD>ホスト更新 (秒)</TD>
<TD><INPUT size=5 {@if chanMgr.hostUpdateInterval}value={$chanMgr.hostUpdateInterval}{@end} name=huint></TD>
</TR>
<TR align=left bgColor=#ddd class="normal">
<TD>メッセージ</TD>
<TD><INPUT type=text {@if servMgr.rootMsg}value="{$servMgr.rootMsg}"{@end} name=pcmsg></TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD width="50%">Get Update</TD>
<TD><INPUT type=checkbox value=1 name=getupd></TD>
</TR>
<TR align=left bgColor=#ddd class="normal">
<TD width="50%">Send</TD>
<TD><INPUT type=checkbox value=1 name=brroot></TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD>Min. PGNU In</TD>
<TD><INPUT size=5 value={$servMgr.minPGNUIn} name=minpgnu></TD>
</TR>
<TR align=left bgColor=#ddd class="normal">
<TD>Max. PGNU In</TD>
<TD><INPUT size=5 value={$servMgr.maxPGNUIn} name=maxpgnu></TD>
</TR>
<TR align=left bgColor=#eee class="normal">
<TD>ブロードキャストID</TD>
<TD><a href="bcid.html">表示</a></TD>
</TR>
</TBODY>
</TABLE>
{@end}
</TD>
<TD vAlign=top>
<TABLE width="100%" align=center border=0>
<TBODY>
<TR align=middle bgColor=#ccc class="normal">
<TD colSpan=2><B>チャンネルフィード</B></TD>
</TR>
<TR align=middle bgColor=#eee class="normal">
<TH>URL</TH>
<TH>公開</TH>
</TR>
{@loop servMgr.numChannelFeedsPlusOne}
{@if loop.indexEven}
<TR bgColor=#ddd> {@else} <TR bgColor=#eee class="normal">
{@end}
<TD>
<INPUT size=15 value="{$loop.channelFeed.url}" name="channel_feed_url" style="width: 100%" placeholder="index.txtのURL">
</TD>
<td align="center">
<input type="checkbox" name="channel_feed_public{$loop.index}" {@if loop.channelFeed.isPublic}checked{@end}>
</td>
</TR>
{@end}
</TBODY>
</TABLE>
</TD>
</TR>
</TBODY>
</TABLE>
</FORM>
<hr size="1">
<div align="center" class="normal-small"> &copy; 2005 peercast.org</div>
</div>
</td>
</tr>
</table>
</div>
</body>
</html>
